:PROPERTIES:
:ID:       0c038334-943e-4023-aaa1-8762376a538e
:END:
#+title: linux工具链
#+filetags: linux

* wget
:PROPERTIES:
:ID:       ccb4b020-7eb6-471e-8a70-5cd50afdf096
:END:
*what* ：文件下载工具
*why*  ：解决命令行环境下的下载需求

** wget下载需要登录才能下载的资源
:PROPERTIES:
:ID:       20b8f886-ec3a-463f-a6a3-247390a64c72
:END:
#+name: 示例 - 登录 Cityscapes Dataset 网站并下载数据集
#+begin_src bash
wget --keep-session-cookies --save-cookies=cookies.txt --post-data 'username=myusername&password=mypassword&submit=Login' https://www.cityscapes-dataset.com/login/ # 模拟用户登录：获取认证 Cookie 并存入文件 cookies.txt
wget --load-cookies cookies.txt --content-disposition https://www.cityscapes-dataset.com/file-handling/?packageID=1 # 使用已登录的身份 下载 packageID=1 对应的数据集文件
#+end_src
|----------------------------+-----------------------------------------------------------------------|
| 参数                       | 作用                                                                  |
|----------------------------+-----------------------------------------------------------------------|
| --keep-session-cookies     | 保留会话 Cookies（通常是短期有效的身份验证信息）                      |
| --save-cookies=cookies.txt | 将认证后的 Cookie 保存到 cookies.txt 供后续请求使用                   |
| --post-data                | 使用 POST 方法提交表单数据（用户名、密码）                            |
| --load-cookies=cookies.txt | 使用之前保存的 Cookie 进行身份认证                                    |
| --content-disposition      | 确保使用服务器提供的正确文件名（通常是 Content-Disposition 头部信息） |
|----------------------------+-----------------------------------------------------------------------|


* curl
:PROPERTIES:
:ID:       dc5e8a86-fed9-488b-9888-32dc59ee3a88
:END:
*what* ：网络请求工具
*why*  ：模拟命令行环境下 =POST/GET/PUT/DELETE= 等 HTTP请求，以及 HTTPS、FTP、SCP等多种协议

** 快速开始
#+begin_example bash
curl https://google.com             # 发送GET请求
curl -X <METHOD> https://google.com # 指定请求方法，如:POST
curl -I https://google.com          # 查看响应头
curl -i https://google.com          # 查看响应头+体
curl -v https://google.com          # 查看请求/响应头
#+end_example


* tar
:PROPERTIES:
:ID:       ee995d8b-a981-4b98-90a4-4ad08dad6216
:END:
*what* ：打包解压工具
tar打包工具 只用于打包多个文件，不压缩文件；gzip/bzip2/xz压缩工具 只用于压缩单个文件，不能打包；因此两者经常结合使用

#+name: 压缩工具对比
|----------+------------------+-------------------------+------+--------|
| 压缩工具 | 单独压缩文件后缀 | 与tar结合的归档压缩后缀 | 速度 | 压缩率 |
|----------+------------------+-------------------------+------+--------|
| gzip     | .gz              | .tar.gz / .tgz          | 快   | 低     |
| bzip2    | .bz2             | .tar.bz2 / .tbz2 / .tb2 | 中   | 中     |
| xz       | .xz              | .tar.xz / .txz          | 低   | 高     |
|----------+------------------+-------------------------+------+--------|

** 快速开始
#+begin_example bash
tar -xf <压缩包>            # 解压
tar -cf <压缩包> <文件路径> # 打包
#+end_example
|------+----------------------------------|
| 参数 | 作用                             |
|------+----------------------------------|
| -x   | 解压                             |
| -c   | 打包                             |
| -f   | 指定文件(必须放最后)             |
| -v   | 显示解压详细信息                 |
| -z   | 使用gzip压缩/解压  .tar.gz或.tgz |
| -j   | 使用bzip2压缩/解压  .tar.bz2     |
| -J   | 使用xz压缩/解压  .tar.xz         |
|------+----------------------------------|


* ping
:PROPERTIES:
:ID:       425f8ce6-2281-433f-95be-cee6ce7a86ff
:END:
*what* ：网络诊断工具
*why*  ：用于测试目标主机是否可达、网络延迟等
*how*  ：发送 ICMP请求包（互联网控制报文协议）到目标，接收并统计目标返回的 ICMP应答包，以此来测试网络连通性、延迟等


* bear
:PROPERTIES:
:ID:       525d55c0-3b48-4736-b49f-174b43b2bb67
:END:
*what* ：构建工具的跟踪器（拦截并记录编译过程中的命令和依赖关系），并生成 =compile_commands.json= （编译数据库），帮助 IDE/静态分析工具 理解如何编译代码，从而提供 代码补全、语法检查、定义跳转等功能
- compile_commands.json :: 编译数据库，记录编译信息（编译命令、源文件、工作目录等）
- 静态分析工具 :: 不运行程序的情况下，通过解析源代码的语法、结构，检查代码问题的工具；常见的有： =clang-tidy= 、 =cppcheck= 等

** 快速开始
#+begin_example bash
bear -- <编译/构建命令>
#+end_example

** compile_commands.json生成
:PROPERTIES:
:ID:       7337c64c-d756-49b3-8280-9d110e11bfe9
:END:
*** cmake项目
#+name: 方法1 - 修改 CMakeLists.txt
#+begin_example cmake
# cmake项目根目录中的 CMakeLists.txt 中写入
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
cmake -B build
#+end_example

#+name: 方法2 - 终端中
#+begin_example bash
# cmake项目根目录中使用以下命令。原因：一个项目中一般有多个CMakeLists.txt，在顶层生成的compile_commands.json包含所有子目录的编译信息
cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON .
#+end_example

*** qmake项目
#+begin_example bash
# qmake项目根目录中使用以下命令
qmake -r                 # 生成 .qmake.stash
bear -- make - j$(nproc)
#+end_example


* nmcli
:PROPERTIES:
:ID:       2fb4c624-be54-4e38-909c-a612d124370a
:END:
*what* ：NetworkManager的命令行工具，用于网络配置和管理
*why*  ：解决命令行环境下的网络配置和管理需求

** nmcli error：802-11-wireless-security.key-mgmt : property is missing
:PROPERTIES:
:ID:       78e54995-0164-427b-a275-00819bc4f78c
:END:
#+name: 解决
#+begin_example bash
nmcli connection up <无线网A>
#+end_example

#+name: 问题复现/原因
#+begin_comment
- 问题复现 :: 无线网A 突然断开，当我使用 =nmcli device wifi connect 无线A password xxx= 再次连接 A 时，出现上述错误
- 原因 :: NetworkManager 存储了 无线网A网络配置 在 connections，通过 =nmcli connection show= 可以找到 A
#+end_comment


* zellij
:PROPERTIES:
:ID:       e81a06a0-32b8-434d-8472-4f6f57698e77
:END:
*what* ：终端复用工具，用于：会话持久化

** 快速开始
#+begin_example bash
zellij attach # 重新连接会话
zellij ls     # 查看所有会话
Ctrl-b d      # 分离会话
#+end_example

** zellij一个tab中创建四个对称pane
:PROPERTIES:
:ID:       a95c7861-33f4-4bec-99cb-40af243afa3d
:END:
1. 新建2个pane（此时总共3个pane）
2. 增大pane大小，还原
3. 新建第3个pane


* tr
:PROPERTIES:
:ID:       96f178f2-34fc-4800-bd10-e2287e4ead2a
:END:
用于 字符替换和删除 的命令

** 快速开始
#+begin_example bash
tr '<原字符集>' '<目标字符集合>' # 字符替换
#+end_example


* tree
:PROPERTIES:
:ID:       0eb0cb1f-9216-42db-834d-2847536a3cbe
:END:
以树状形式展开文件夹结构

** 快速开始
#+begin_example bash
tree -L <层级> <文件夹路径> # （树状形式）查看某个文件夹的结构
#+end_example


* rg
:PROPERTIES:
:ID:       cdfc71bd-3f9d-47c5-b52b-54f8d7684246
:END:
超快匹配 *文本* 命令（grep的替代品）


* jq
:PROPERTIES:
:ID:       75be961c-3c73-409b-b39e-523cecf819ab
:END:
JSON处理 命令（解析、查询、过滤、格式化）

** 快速开始
#+begin_src bash
输出内容 | jq
#+end_src


* fd
:PROPERTIES:
:ID:       5b42d3c9-135d-4320-9343-3c4e9725d1a8
:END:
超快查找 *文件/目录* 命令（find的替代品）

** 快速开始
#+begin_src bash
fd <文件名> <路径>
#+end_src

** find
:PROPERTIES:
:ID:       70e7b35f-700f-450e-8def-c538d4be8db6
:END:
#+begin_example bash
find <路径> -name "<文件名>"
#+end_example


* ss
:PROPERTIES:
:ID:       ea7663e8-47d0-4877-bc9b-d868de430b64
:END:
超快 *TCP/UDP套接字等 网络连接* 查询工具（netstat的替代品）

** 快速开始
#+begin_src bash
sudo ss -tulnp | grep <XX> # 查看端口占用
#+end_src
|------+----------------------------|
| 参数 | 作用                       |
|------+----------------------------|
| -t   | 显示TCP                    |
| -u   | 显示UDP                    |
| -l   | 监听端口                   |
| -n   | 不要解析域名               |
| -p   | 显示关联的 进程名、pid、fd |
|------+----------------------------|


* telnet
:PROPERTIES:
:ID:       9658ad38-a103-43a0-80fd-fca31de9ea12
:END:
基于Telnet协议的 *远程登录* 的命令，常用于测试 TCP端口的连通性

** 快速开始
#+begin_example bash
telnet <主机名/IP> <端口>  # 远程
#+end_example


* nslookup
:PROPERTIES:
:ID:       64d54990-367b-4000-8065-4e0480e5d449
:END:
DNS分析 命令

** 快速开始
#+begin_src bash
nslookup twitter.com          # 使用 本地默认DNS服务器 查询 twitter.com 对应 IP
nslookup twitter.com 8.8.8.8  # 使用 Google公共DNS服务器

# nslookup <域名> [<DNS服务器>]
#+end_src


* nc
:PROPERTIES:
:ID:       8a45ecc0-e366-46fa-8b67-06e48e4d10e7
:END:
命令行网络工具，支持：端口扫描、模拟客户端、模拟服务端等
（nc是建连接的，ss是看连接的）

** 快速开始
#+begin_example bash
nc -zv <IP> <端口> # 端口连通性测试
#+end_example
|----------------+--------------------------|
| 参数           | 作用                     |
|----------------+--------------------------|
| -z <IP> <端口> | 连通性测试（无数据传输） |
| -v <IP> <端口> | 详细信息                 |
|----------------+--------------------------|


* sed
:PROPERTIES:
:ID:       56fc09ea-f525-4310-badf-d53593e12117
:END:
面向文本流的流式编辑器，按 *行* 处理
- 流式编辑器 :: 在输入流（文件或管道）中完成文本处理


* awk
:PROPERTIES:
:ID:       17c02507-30bb-45d9-8869-4fb81181e26f
:END:
处理文本的 编程语言，按 *行和列* 处理


* apt
:PROPERTIES:
:ID:       3084031a-2744-49af-8487-3ee431de51da
:END:
ubunte默认的包管理工具，整合了
1. apt-get
2. apt-config
3. apt-cache

** apt-get设置镜像源
:PROPERTIES:
:ID:       8887c9c4-0a60-4031-bb66-0def3573218d
:END:
#+begin_example bash
vim /etc/apt/sources.list.d/ubuntu.sources # 新配置文件位置
vim /etc/apt/sources.list                  # 旧配置文件位置

# 输出以下内容
# 清华源
Types: deb
URIs: http://mirrors.tuna.tsinghua.edu.cn/ubuntu/
Suites: noble noble-updates noble-security
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg

# 中科大源
Types: deb
URIs: http://mirrors.ustc.edu.cn/ubuntu/
Suites: noble noble-updates noble-security
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg

# 网易164源
Types: deb
URIs: http://mirrors.163.com/ubuntu/
Suites: noble noble-updates noble-security
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg

# 阿里云
Types: deb
URIs: http://mirrors.aliyun.com/ubuntu/
Suites: noble noble-updates noble-security
Components: main restricted universe multiverse
Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
#+end_example


* ps
:PROPERTIES:
:ID:       93b33ab6-eb9a-47af-a4e7-687c22822cbc
:END:
*静态* 进程状态查看命令；用于查看 *命令及对应PID* ，后续通过 =kill= 发送信号

** 快速开始
#+begin_example bash
ps -ef
#+end_example
|------+------+----------------------------------|
| 命令 | 选项 | 作用                             |
|------+------+----------------------------------|
| ps   | -e   | 显示所有进程                     |
|      | -f   | 显示完整格式（PPID、启动时间等） |
|      | -H   | 进程树层级(进程父子关系)         |
|------+------+----------------------------------|


* nm
:PROPERTIES:
:ID:       5c046343-20d2-4847-97c3-115355841cb4
:END:
符号表信息（函数/变量符号）分析工具，检查库中是否有需要的符号
#+name: nm与ldd的区别
#+begin_comment
使用ldd发现库正确链接，但出现符号错误，此时就需要用nm分析，库版本可能不对
#+end_comment


* jobs
:PROPERTIES:
:ID:       f9558077-d96d-4756-a953-67b04a0d0ab3
:END:
- jobs :: linux 中用于 后台运行任务 的命令

** 快速开始
|------------------------+--------------------------|
| 命令                   | 作用                     |
|------------------------+--------------------------|
| <二进制文件> &         | 后台运行                 |
| jobs -l                | 显示作业的PID和详细信息  |
| fg %<作业号>           | 后台作业切换到前台运行   |
| bg %<作业号>           | 已停止作业恢复到后台运行 |
| kill -<数字> %<作业号> | -20为停止后台作业        |
|------------------------+--------------------------|
