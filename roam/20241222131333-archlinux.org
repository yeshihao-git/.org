:PROPERTIES:
:ID:       29a2fc5a-1db6-4a13-a5cd-397e587c21ec
:END:
#+title: arch linux
#+filetags: linux

* arch linux
- arch linux :: [[id:ec7aef91-2628-4ba9-b300-16652314877f][linux]]çš„ä¸€ä¸ªå‘è¡Œç‰ˆ
  1. [[id:37810e04-b5c7-4d84-bcc3-e77239b9c877][systemd]] ä½œä¸ºé»˜è®¤çš„ initç³»ç»Ÿ ä¸ æœåŠ¡ç®¡ç†å™¨
  2. [[id:fe221daa-775a-4b53-a00f-1700a6698e9f][pacman]] ä½œä¸ºé»˜è®¤çš„åŒ…ç®¡ç†å™¨


** arch linuxå®‰è£…å‘æ—¥è‘µ
:PROPERTIES:
:ID:       62661967-ea04-42e8-ad6e-94455d5cc65d
:END:
#+begin_src bash
yay -S sunloginclient
sudo systemctl start runsunloginclient.service
sudo systemctl enable runsunloginclient.service
#+end_src


** arch linuxç»ˆç«¯musicfoxæ’­æ”¾éŸ³ä¹æ—¶æ— æ³•ä½¿ç”¨è€³æœºæ’­æ”¾ [[https://github.com/go-musicfox/go-musicfox/issues/348][å‚è€ƒ]]
:PROPERTIES:
:ID:       e96c5fd0-b5fd-49c5-b417-d0a2cdf8214d
:END:
#+begin_src bash
pacman -S pipewire-alsa
#+end_src


** archè®¾ç½®ä¸­æ–‡ç¯å¢ƒ [[https://wiki.archlinuxcn.org/wiki/%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E6%9C%AC%E5%9C%B0%E5%8C%96][archwiki]]
:PROPERTIES:
:ID:       aef7f7a8-1769-4493-a5af-71e81fdd19c6
:END:
1. ç”Ÿæˆè¯­è¨€åŒ…
   #+begin_src bash
   sudo vim /etc/locale.gen
   # å–æ¶ˆ zh_CN.UTF-8 UTF-8 å‰çš„æ³¨é‡Š
   sudo locale-gen # ç”Ÿæˆè¯­è¨€åŒ…
   #+end_src
2. è®¾ç½® LANG ç¯å¢ƒå˜é‡ï¼ˆå¯èƒ½å‡ºç°ç»ˆç«¯è±†è…å—é—®é¢˜ï¼Œè§£å†³è§ wikiï¼‰
   #+begin_src bash
   sudo vim /etc/locale.conf
   LANG=zh_CN.UTF-8
   #+end_src
3. reboot


** archå®‰è£…linux-zenå†…æ ¸
:PROPERTIES:
:ID:       0a676403-2036-4796-aa2b-cf5f423725b8
:END:
#+begin_src bash
sudo pacman -S linux-zen linux-zen-headers # å®‰è£… linux-zen
sudo grub-mkconfig -o /boot/grub/grub.cfg  # æ›´æ–°å¼•å¯¼åŠ è½½ç¨‹åº
reboot
# å¼•å¯¼èœå• -> é«˜çº§èœå• -> linux-zen
# éªŒè¯å†…æ ¸ï¼šuname -r
#+end_src


** arch linuxå®‰è£…
:PROPERTIES:
:ID:       54f0fc20-1210-4a8f-9302-fa20f48e778a
:END:
1. ä¸‹è½½å®˜æ–¹é•œåƒï¼Œå°†å®˜æ–¹é•œåƒçƒ§å½•åˆ° Uç›˜ ä¸­ï¼ˆwinä¸­æ¨èä½¿ç”¨Rufusï¼‰ï¼Œæ­¤æ—¶ Uç›˜ ä¸­å°±æœ‰ä¸€ä¸ªå®Œæ•´çš„ arch linux liveç³»ç»Ÿ
2. liveç³»ç»Ÿå¯ä»¥ç†è§£ä¸ºä¸´æ—¶çš„ç³»ç»Ÿï¼Œå› ä¸ºå½“æˆ‘ä»¬å°† Uç›˜ æ’å…¥ä¸»æœºä¸­çš„æ—¶å€™ï¼Œåœ¨ å›ºä»¶ï¼ˆBIOSã€UEFIï¼‰ä¸­é€‰æ‹©ä» usbå¯åŠ¨ å°±ä¼šå°† Uç›˜ ä¸­çš„å®Œæ•´ arch linux liveç³»ç»Ÿ åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œ
3. ç„¶åä½¿ç”¨ chroot åˆ‡æ¢æ ¹ç›®å½•åˆ°ä¸»æœºçš„ç¡¬ç›˜ä¸­ï¼Œå°±èƒ½åœ¨ä¸»æœºçš„ç¡¬ç›˜ä¸­è¿›è¡Œå„ç§æ“ä½œäº†
4. arch linux ä¸æ”¯æŒ Secure Bootï¼ŒUEFI é»˜è®¤å¯åŠ¨ Secure Bootï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ä¸»æ¿ä¸­å°†å…¶å…³é—­
5. å…³é—­ windows çš„å¿«é€Ÿå¯åŠ¨å’Œä¼‘çœ ï¼›æ–¹æ³•è§ï¼š [[id:73f9ea05-2107-4089-9d93-49a4afa9b8ae][windowså…³é—­å¿«é€Ÿå¯åŠ¨å’Œä¼‘çœ ]]


** arch linuxç®¡ç†java jdk
:PROPERTIES:
:ID:       8b071178-f17a-460f-b913-9f6bed59b4c7
:END:
archlinux-java ç”¨äºç®¡ç†å’Œåˆ‡æ¢ç³»ç»Ÿä¸­å·²å®‰è£…çš„javaç‰ˆæœ¬
#+begin_example bash
archlinux-java status                      # æŸ¥çœ‹æ‰€æœ‰jdkç‰ˆæœ¬
sudo archlinux-java set <java-environment> # è®¾ç½®javaçš„jdkç‰ˆæœ¬
#+end_example


* pacman
:PROPERTIES:
:ID:       fe221daa-775a-4b53-a00f-1700a6698e9f
:END:
arch linux å’Œ windowsä¸Šmsys2 çš„é»˜è®¤åŒ…ç®¡ç†å·¥å…·


** å¿«é€Ÿå¼€å§‹
#+name: æ”¹é•œåƒ
#+begin_example bash
vim /etc/pacman.conf
#+end_example

#+name: åŒ…çš„ å®‰è£…/å¸è½½/æŸ¥è¯¢/å‡çº§é™çº§
#+begin_example bash
pacman -S <åŒ…>  # å®‰è£…åŒ…
pacman -Ss <åŒ…> # è¿œç¨‹æœç´¢åŒ…ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
pacman -Sy      # æ›´æ–°åŒæ­¥æ•°æ®åº“ï¼ˆåŒæ­¥æ•°æ®åº“ï¼š/var/lib/pacman/syncï¼‰
pacman -Syu     # æ›´æ–°åŒæ­¥æ•°æ®åº“ã€å‡çº§æ‰€æœ‰å·²å®‰è£…è½¯ä»¶

pacman -R <åŒ…>  # åˆ é™¤è½¯ä»¶
pacman -Rn <åŒ…> # åˆ é™¤è½¯ä»¶+é…ç½®

pacman -Q <åŒ…>  # æœ¬åœ°æœç´¢åŒ…ï¼ˆç²¾ç¡®æœç´¢ï¼‰ï¼ˆæœ¬åœ°æ•°æ®åº“ï¼š/var/lib/pacman/localï¼‰
pacman -Qs <åŒ…> # æœ¬åœ°æœç´¢åŒ…ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
pacman -Ql <åŒ…> # åˆ—å‡ºåŒ…ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…å«å¤´æ–‡ä»¶ã€åº“æ–‡ä»¶ç­‰ï¼‰

pacman -U <åŒ…>  # ç”¨åŒ…ç¼“å­˜ç›®å½•ä¸­çš„åŒ…å‡çº§é™çº§åŒ…ï¼ˆåŒ…ç¼“å­˜ç›®å½•ï¼š/var/cache/pacman/pkgï¼‰
#+end_example


** arch linuxçš„wpsä¹±ç é—®é¢˜
:PROPERTIES:
:ID:       6c057be0-010b-4a00-b89c-64939dd99996
:END:
#+name: ç»™freetypeé™çº§
#+begin_example
pacman -U /var/cache/pacman/pkg/freetype2-2.13.0-1-x86_64.pkg.tar.zst
#+end_example

ğŸ“ [[https://bbs.archlinux.org/viewtopic.php?id=288562][å‚è€ƒ]]


* yay
- yay :: pacman å’Œ AURåŠ©æ‰‹ çš„å‰ç«¯å·¥å…·ï¼Œæ•´åˆäº† å®˜æ–¹è½¯ä»¶ä»“åº“ï¼ˆpacman åŠŸèƒ½ï¼‰å’Œ Archç”¨æˆ·ä»“åº“ï¼ˆAURï¼‰ï¼Œæ”¯æŒä¸€é”®æœç´¢ã€å®‰è£…ã€æ›´æ–° å®˜æ–¹è½¯ä»¶åŒ… å’Œ AURç¤¾åŒºè½¯ä»¶åŒ…

** yayå®‰è£…
:PROPERTIES:
:ID:       2922fdf9-0f26-421d-9ba7-05e3ca37d0ea
:END:
1. æŒ‚ä»£ç†ï¼›è§ [[id:b2299062-b568-4efd-8288-9ba461a40031][åŒä¸€å±€åŸŸç½‘ä¸€å°æœºå™¨è¿å¦ä¸€å°æœºå™¨çš„ä»£ç†]]
2. =git clone https://aur.archlinux.org/yay-bin.git=
3. =cd yay-bin=
4. =makepkg -si=
5. æœ‰æ—¶å€™ makepkg -si å› ä¸ºç½‘ç»œé—®é¢˜æ²¡æ³•ä¸‹è½½ yay_12.5.0_x86_64.tar.gz å¯¼è‡´å¤±è´¥ï¼›æ­¤æ—¶åœ¨ yay-binæ–‡ä»¶å¤¹ä¸­ =wget https://github.com/Jguer/yay/releases/download/v12.5.0/yay_12.5.0_x86_64.tar.gz= å†æ‰§è¡Œ =makepkg -si=
6. ä¹Ÿå¯ä»¥åœ¨ *æµè§ˆå™¨ä¸­æ‰‹åŠ¨è®¾ç½®ä»£ç†* å†å» yay çš„ github ä¸Šä¸‹è½½ yay_12.5.0_x86_64.tar.gz


** yay errorï¼šproxyconnect tcp:EOF
:PROPERTIES:
:ID:       3da2606e-221e-431e-a48b-328b57d43b77
:END:
1. é—®é¢˜åœ¨äºyay åº•å±‚æ˜¯é€šè¿‡ [[id:47eb3326-7aac-4300-904e-33f7539709c8][curl]] è®¿é—®èµ°ä»£ç†ï¼ˆproxyconnectï¼‰è¿æ¥ AURæœåŠ¡å™¨ï¼ˆhttps://aur.archlinux.org ï¼Œå¯ä»¥é€šè¿‡ *curl -v https://aur.archlinux.org* çœ‹è¯¦ç»†è¿æ¥è¿‡ç¨‹ï¼‰ ï¼Œè€Œæˆ‘åœ¨ç»ˆç«¯è¾“å…¥ï¼šexport https_proxy="https://127.0.0.1:7890" å¸Œæœ› curl èµ°HTTPSçš„ä»£ç†ï¼Œ  ä½† clash æ˜¯ *HTTPä»£ç†è½¯ä»¶* ï¼Œåªèƒ½é€šè¿‡ *http://127.0.0.1:7890* è®¿é—®
2. å› æ­¤ç»ˆç«¯è®¾ç½®ï¼šexport https_proxy="http://127.0.0.1:7890" ï¼ˆ *å†æ¬¡æ³¨æ„* ï¼šè¿™é‡Œæ˜¯ http:// ï¼ï¼‰ï¼› å‚è€ƒ [[id:49d53854-7e0a-462b-9397-d54f3a08f559][linuxç»ˆç«¯èµ°ä»£ç†]]


* systemd
systemd æ˜¯ arch é»˜è®¤çš„initè¿›ç¨‹ï¼ˆPID 1ï¼‰ï¼›é…å¥—äº†ä¸€ç³»åˆ—çš„å‘½ä»¤è¡Œå·¥å…·ï¼š
1. systemctl ï¼šæœåŠ¡ç®¡ç†
2. journalctlï¼šæ—¥å¿—ç®¡ç†
3. networkctlï¼šç½‘ç»œç®¡ç†
4. loginctl  ï¼šç™»å½•ç®¡ç†


** systemctl
:PROPERTIES:
:ID:       37810e04-b5c7-4d84-bcc3-e77239b9c877
:END:
ç”¨äºç®¡ç†ç³»ç»ŸæœåŠ¡


*** å¿«é€Ÿå¼€å§‹
#+begin_example bash
systemctl -h | less
#+end_example

