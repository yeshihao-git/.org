:PROPERTIES:
:ID:       1f25d68b-a6ed-4c42-9d23-53b274392da6
:END:
#+title: emacs工具链
#+filetags: emacs

* avy
:PROPERTIES:
:ID:       f0034544-76e1-4836-b6e2-6871147628a7
:END:
- avy :: emacs 中实现基于字母跳转
|-----------------+--------+---------------|
| 函数            | 快捷键 | 作用          |
|-----------------+--------+---------------|
| avy-goto-word-0 | C-r    | 单词开头 跳转 |
| avy-goto-line   | C-x j  | 行 跳转       |
|-----------------+--------+---------------|


* bookmark.el
:PROPERTIES:
:ID:       ab89d30d-1fac-4d72-92ff-df5dc71ea4a1
:END:
- bookmark.el :: emacs 的 *书签* 功能

** 快速开始
|---------------------+-----------------------------------------|
| 函数                | 作用                                    |
|---------------------+-----------------------------------------|
| bookmark-set        | 书签 创建                               |
| bookmark-save       | 书签 保存到磁盘                         |
| consult-bookmark    | 书签 跳转（推荐）                       |
| bookmark-jump       | 书签 跳转                               |
| bookmark-bmenu-list | 打开 书签列表缓存区（d标记删除，x执行） |
|---------------------+-----------------------------------------|


* consult
:PROPERTIES:
:ID:       fef52c99-9a1f-4e7c-b9c3-55a8f78b4030
:END:
- consult :: emacs 中的 *搜索/导航* 增强插件，[[id:13d1007d-c805-482c-bf95-5e53ba86bf4c][doom emacs]] 中的 =+default/search-xxx= 是对 consult 的封装和增强

** 快速开始
|-------------------------------+---------+--------------------|
| 函数                          | 快捷键  | 作用               |
|-------------------------------+---------+--------------------|
| consult-org-heading           | C-c l . | headline 搜索/导航 |
| consult-bookmark              | C-c s m | 书签     搜索/导航 |
| consult-yasnippet             | C-c & i | 模板     搜索/导航 |
| consult-line                  | C-s     | buffer内 搜索/导航 |
| consult-flycheck              |         | 语法错误 搜索/导航 |
|-------------------------------+---------+--------------------|
| +default/search-project       | C-c s p | 当前项目 搜索/导航 |
| +default/search-other-project | C-c s P | 其他项目 搜索/导航 |
|-------------------------------+---------+--------------------|

** consult过滤搜索结果
:PROPERTIES:
:ID:       ad5c4670-09a7-4774-9ea8-613d88ce08e1
:END:
#+begin_example cpp
#org -- -g someday.org      // 先搜索关键字org，过滤出文件名为 someday.org 的候选项
#+end_example
更多过滤方法见：[[https://github.com/minad/consult#asynchronous-search][参考]]


* dired
:PROPERTIES:
:ID:       e6e64011-45a5-4349-b1ea-7789500acb13
:END:
- dired :: emacs 的文件管理器

** 快速开始
|--------+-------------------------------------------------------|
| 快捷键 | 作用                                                  |
|--------+-------------------------------------------------------|
| m      | 标记文件                                              |
| u/U    | 取消 标记/所有标记                                    |
| D      | 删除 标记文件                                         |
| % m    | 正则表达式标记文件（eg：标记所有.h结尾的文件 => \.h） |
| C      | 复制文件                                              |
| s      | 排序（文件名、时间之间切换）                          |
| v      | 查看文件（view模式，只读）                            |
| C-o    | 查看文件（另一个窗口，光标不跳转）                    |
| i      | 在当前目录插入子目录                                  |
|--------+-------------------------------------------------------|


* lsp-mode
:PROPERTIES:
:ID:       a144c7b5-3ece-4cac-a7ea-3ad48ca201ff
:END:
- lsp-mode :: 用于提供 语言服务器协议（lsp）支持的 emacs 扩展
- lsp :: 语言服务器协议，用于 编辑器、语言服务器 通信，提供类似于现代 IDE 的代码补全、语法检查、跳转定义等功能。eg：clangd

** lsp-mode设置智能感知
:PROPERTIES:
:ID:       3618c9c5-68d7-4797-9ec4-6ed13cb007b2
:END:
1. 生成 [[id:7337c64c-d756-49b3-8280-9d110e11bfe9][compile_commands.json]]
2. =M-x lsp-restart-workspace=


* projectile
:PROPERTIES:
:ID:       7aabab73-e582-4b17-99f7-7e4411339dc5
:END:
- projectile ::  emacs 中用于 *项目管理* 的第三方插件（emacs 内置的 project.el 的上位替代）

** 快速开始
*配置* 变量 =projectile-project-root-files= 让 projectile 识别项目

|------------------------------+---------+----------------------|
| 函数                         | 快捷键  | 作用                 |
|------------------------------+---------+----------------------|
| projectile-add-known-project | C-c p a | 设置某个文件夹为项目 |
| projectile-add-known-project | C-c p r | 从项目目录删除       |
| projectile-switch-project    | C-c p p | 切换项目             |
|------------------------------+---------+----------------------|


* multiple-cursors
:PROPERTIES:
:ID:       83235f01-d0bc-4ac0-85eb-22e3d787068b
:END:
- multiple-cursors :: emacs 中用于 *多光标编辑* 的插件

** 快速开始
|-----------------------+---------+-----------------------------|
| 函数                  | 快捷键  | 作用                        |
|-----------------------+---------+-----------------------------|
| mc/edit-lines         | C-c m l | 选中的 region 行头插入 光标 |
| mc/edit-ends-of-lines | C-c m e | 选中的 region 行尾插入 光标 |
|-----------------------+---------+-----------------------------|


* transpose-frame
:PROPERTIES:
:ID:       282b56b7-ee67-4050-b264-8cf8f644aaa3
:END:
- transpose-frame :: emacs 中用于 *改变 buffer 位置* 的插件

** 快速开始
|----------------------------+--------+-----------------|
| 函数                       | 快捷键 | 作用            |
|----------------------------+--------+-----------------|
| transpose-frame            | C-t    | 交换 x轴 和 y轴 |
| flip-frame                 |        | 垂直翻转        |
| flop-frame                 |        | 水平翻转        |
| rotate-frame               |        | 旋转180度       |
| rotate-frame-clockwise     |        | 顺时针旋转90度  |
| rotate-frame-anticlockwise |        | 逆时针旋转90度  |
|----------------------------+--------+-----------------|
示意图，见：[fn:1]


* use-package
:PROPERTIES:
:ID:       6c5c1535-794a-43a0-80cf-57657c103dd3
:END:
- use-package :: emacs 中的 *包配置* 工具

** 快速开始
|-----------+----------------------|
| 块        | 作用                 |
|-----------+----------------------|
| :init     | 包加载前执行         |
| :config   | 包加载后执行         |
| :bind     | 使用快捷键时，加载包 |
| :defer    | 直接延迟加载整个包   |
| :commands | 使用命令时，加载包   |
|-----------+----------------------|


* winner
:PROPERTIES:
:ID:       7b43e1fe-7cae-4587-852b-b60c3a7881d0
:END:
- winner :: emacs 中记录 *窗口布局* 状态的插件，可以用于来 恢复、重做 窗口布局

** 快速开始
|-------------+---------------|
| 函数        | 作用          |
|-------------+---------------|
| winner-undo | 恢复 窗口布局 |
| winner-redo | 重做 窗口布局 |
|-------------+---------------|


* ace-window
:PROPERTIES:
:ID:       fab6f115-cd84-45dc-8c86-ebf73a2452aa
:END:
- ace-window :: emacs 中的 *窗口切换、管理* 的插件

** 快速开始
|------------+---------------+--------------------------------------------------------|
| 函数       | 快捷键        | 作用                                                   |
|------------+---------------+--------------------------------------------------------|
| ace-window | C-x o         | 切换窗口（ =变量 aw-keys= 设置窗口选择方式：数字、字母） |
|            | C-u C-x o     | 交换窗口                                               |
|            | C-u C-u C-x o | 关闭窗口                                               |
|------------+---------------+--------------------------------------------------------|
多窗口情况下（窗口数 >= 3），使用 =ace-window= 后，通过以下按键，进行多窗口管理
|---+--------------------------------------------------------|
| x | 删除窗口                                               |
| m | 交换窗口                                               |
| M | 移动窗口                                               |
| c | 复制窗口                                               |
| j | 选择buffer                                             |
| n | 选择先前的窗口                                         |
| u | 选择另一个窗口的buffer                                 |
| v | 水平划分窗口                                           |
| b | 垂直划分窗口                                           |
| o | 最大化选择的窗口
| ? | 按键绑定                                               |
|---+--------------------------------------------------------|


* tab-bar
:PROPERTIES:
:ID:       9cc67937-2e9f-4d6e-a436-9e3d5b78c72d
:END:
- tab-bar :: emacs 中实现 *标签页* 的插件

** 快速开始
|------------+-----------+------------|
| 函数       | 快捷键    | 作用       |
|------------+-----------+------------|
| tab-new    | C-x t 2   | 新建便签页 |
| tab-close  | C-x t 0   | 关闭便签页 |
| tab-switch | C-x t RET | 切换标签页 |
|------------+-----------+------------|


* gud
:PROPERTIES:
:ID:       2ea92e06-8c1b-4b05-aa40-eded46107b9d
:END:
- gud :: emacs 中的大统一调试器（Grand Unified Debugger），用于在 emacs 中运行和调试多种编程语言的代码

** emacs使用gud进行调试
:PROPERTIES:
:ID:       9840eca4-2fee-4acb-8454-354ff80c2a6c
:END:
1. =M-x gdb=                       -> minibuffer 中输入： =gdb -i=mi <二进制文件>=
2. =M-x gdb-many-windows=          -> 打开一系列gud窗口，可用鼠标互动
3. =M-x gud-tooltip-mode=          -> 开启工具提示
4. =C-x 1=                         -> 最大化源码窗口浏览代码
5. [[id:7b43e1fe-7cae-4587-852b-b60c3a7881d0][winner]] 或 =gdb-restore-windows= -> 还原窗口布局
|---------------------+------------------------------------|
| 命令                | 作用                               |
|---------------------+------------------------------------|
| gdb                 | 开启gdb调试                        |
| gdb-many-windows    | 打开一系列gud窗口，可用鼠标互动    |
| gdb-restore-windows | 恢复窗口布局                       |
| gud-until           | 运行到光标所在语句                 |
| gud-tooltip-mode    | 开启工具提示，鼠标停留变量名提示值 |
|---------------------+------------------------------------|


* artist
:PROPERTIES:
:ID:       313e6317-40c1-4556-b5d0-2ab663b67091
:END:
- artist ::  emacs 中的 *画图* 工具（绘制 ASCII 图）

** emacs画图 [[https://www.shellcodes.org/Emacs/Emacs%E7%BB%98%E5%9B%BE%E7%BA%AF%E6%96%87%E6%9C%AC%E6%B5%81%E7%A8%8B%E5%9B%BE.html][博客-LU4NX]]
:PROPERTIES:
:ID:       6df1559f-7ac8-464f-bbf0-cd22bca8036b
:ROAM_ALIASES: org画图
:END:
*手动绘图*
1. =C-c '= 进入代码块为 =picture-mode=
#+begin_src picture
（代码块的高度决定 C-c ' 进入后画布的高度，尽量撑高）
...
#+end_src
2. =<回车>= 切换 画图/移动模式
3. 单词的第一个字母左上角标记，移动到最后一个字母右下角， =C-c C-r= 就能用方框包围
#+begin_example bash
.....|......     # 符号| 表示 标记的开始和结束
......hello.     # 符号. 表示 空格
...........|
#+end_example
4. 控制方向的快捷键
#+begin_example
   +-------+   +-------+   +-------+
   | C-c ` |   | C-c ^ |   | C-c ' |
   +-------+   +-------+   +-------+
           ^       ^       ^
            \      |      /
              \    |    /
+-------+       \  |  /        +-------+
| C-c < |<-------------------->| C-c > |
+-------+       /  |  \        +-------+
              /    |    \
            /      |      \
           v       v       v
   +-------+   +-------+   +-------+
   | C-c / |   | C-c . |   | C-c \ |
   +-------+   +-------+   +-------+
#+end_example

*鼠标绘图*
=#+begin_src artist=  然后 =C-c '= 进入代码块为 =artist-mode= (#+begin_src <mode名>：<mode名> 填啥，C-c ' 就进入啥mode)
#+begin_src artist


#+end_src
|------------------+--------------|
| 按键             | 作用         |
|------------------+--------------|
| 鼠标中键         | 切换画笔     |
| 鼠标左键         | 使用画笔     |
| 鼠标左键 + shift | 画笔特殊功能 |
| 鼠标右键         | 橡皮擦       |
| 鼠标右键 + shift | 范围橡皮擦   |
|------------------+--------------|


* yasnippet
:PROPERTIES:
:ID:       09861cc7-7387-4795-8a7b-0ced6ac9ea13
:END:
- yasnippet :: emacs 中 *代码片段* 管理工具，用户可以通过简单的触发词触发代码模板扩展

** 快速开始
=输入一个key= 或 =选中一个区域后= 按下 =TAB= 触发模板扩展，也能通过 =consult-yasnippet= 直接插入模板

** yasnippet创建模板
:PROPERTIES:
:ID:       a5ae75a0-29d0-4e44-93d2-94d40636337a
:END:
1. 使用 =yas-new-snippet= 新建模板
#+begin_example cpp
/*--------------模板----------------*/
# -*- mode: snippet -*-
# name:  <模板名称>
# key:   <触发词，用于扩展成模板>
# --
<模板>
/*--------------模板----------------*/
#+end_example
2. =<模板>= 语法
#+begin_example bash
#------模板1--------#
<div$1>             # 制表位：即 $<数字> ，按下 TAB 后跳转的位置，跳转顺序 $1 $2 ...，$0 表示最终退出的位置
    $0
</div$2>
#------模板1--------#

#------模板2--------#
\begin$1            # 镜像：相同数字标识的制表位的值同时改变
   $0
\end$1
#------模板2--------#
#+end_example
3. 重新加载模板： =yas-reload-all=
4. 查看可用模板： =yas-describe-tables=
5. 设置模板默认存储路径： =yas-snippet-dirs=


* Footnotes

[fn:1]
=transpose-frame= ：交换 x 方向和 y 方向
+------------+------------+      +----------------+--------+
|            |     B      |      |        A       |        |
|     A      +------------+      |                |        |
|            |     C      |  =>  +--------+-------+   D    |
+------------+------------+      |   B    |   C   |        |
|            D            |      |        |       |        |
+-------------------------+      +--------+-------+--------+
=flip-frame= ：垂直翻转
+------------+------------+      +------------+------------+
|            |     B      |      |            D            |
|     A      +------------+      +------------+------------+
|            |     C      |  =>  |            |     C      |
+------------+------------+      |     A      +------------+
|            D            |      |            |     B      |
+-------------------------+      +------------+------------+
=flop-frame= ：水平翻转
+------------+------------+      +------------+------------+
|            |     B      |      |     B      |            |
|     A      +------------+      +------------+     A      |
|            |     C      |  =>  |     C      |            |
+------------+------------+      +------------+------------+
|            D            |      |            D            |
+-------------------------+      +-------------------------+
=rotate-frame= ：旋转180度
+------------+------------+      +-------------------------+
|            |     B      |      |            D            |
|     A      +------------+      +------------+------------+
|            |     C      |  =>  |     C      |            |
+------------+------------+      +------------+     A      |
|            D            |      |     B      |            |
+-------------------------+      +------------+------------+
=rotate-frame-clockwise= ：顺时针旋转90度
+------------+------------+      +-------+-----------------+
|            |     B      |      |       |        A        |
|     A      +------------+      |       |                 |
|            |     C      |  =>  |   D   +--------+--------+
+------------+------------+      |       |   B    |   C    |
|            D            |      |       |        |        |
+-------------------------+      +-------+--------+--------+
=rotate-frame-anticlockwise= ：逆时针旋转90度
+------------+------------+      +--------+--------+-------+
|            |     B      |      |   B    |   C    |       |
|     A      +------------+      |        |        |       |
|            |     C      |  =>  +--------+--------+   D   |
+------------+------------+      |        A        |       |
|            D            |      |                 |       |
+-------------------------+      +-----------------+-------+
