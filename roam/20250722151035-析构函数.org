:PROPERTIES:
:ID:       be44b0c2-d234-409f-b1a6-b447e365db37
:END:
#+title: 析构函数
#+filetags: cpp

* 析构函数
- 析构函数 :: 类的特殊[[id:3a39bdbf-179e-4dd8-aaf9-3aeb1d0c3863][成员函数]]，在类对象生命周期结束时自动调用，用于 *销毁对象 和 销毁对象前的清理工作* （eg：释放动态资源）
  1. 执行流程：类对象被销毁 -> 自动调用析构函数 -> *析构函数体内* 执行清理操作， *析构函数体* 执行后 *非static成员变量* 按 *初始化逆序* 销毁
  2. 编译器会合成 *隐式析构函数* ：未自定义 析构函数
  3. 析构函数不能是删除的（[[id:82d44637-d24d-485d-847c-b59ad9d88048][=delete]]）会导致无法销毁这个类对象
  4. *何时调用* ？
     1) 离开作用域
     2) delete
     3) 表达式结束（作为临时对象）
     4) 外部类销毁（作为嵌套类型的类）
     5) 容器销毁（类作为其中的元素）
  5. 继承体系中应 *定义虚析构* ，防止 [[id:6782179f-792b-4eb6-807c-4f95aba88169][内存泄漏]]
#+begin_example cpp
~类型() {}
#+end_example
